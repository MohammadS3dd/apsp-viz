import{createApp as e}from"https://unpkg.com/petite-vue?module";import{c as t,e as s}from"./vendor.fb307c32.js";var r={container:document.getElementById("cy"),style:[{selector:"node[name]",style:{content:"data(name)","background-color":"white","border-color":"#737373","border-width":"3px","text-valign":"center"}},{selector:"edge",style:{"curve-style":"bezier","target-arrow-shape":"triangle","line-color":"#909090"}},{selector:".eh-handle",style:{"background-color":"red",width:12,height:12,shape:"ellipse","overlay-opacity":0,"border-width":12,"border-opacity":0}},{selector:".eh-hover",style:{"background-color":"red"}},{selector:".eh-source",style:{"border-width":2,"border-color":"red"}},{selector:".eh-target",style:{"border-width":2,"border-color":"red"}},{selector:".eh-preview, .eh-ghost-edge",style:{"background-color":"red","line-color":"red","target-arrow-color":"red","source-arrow-color":"red"}},{selector:".eh-ghost-edge.eh-preview-active",style:{opacity:0}},{selector:"edge",css:{label:"data(weight)","text-margin-y":15,"text-rotation":"autorotate"}}],layout:{name:"concentric",concentric:function(e){return"j"===e.id()?200:0},levelWidth:function(e){return 100},minNodeSpacing:100}};let o;t.use(s);var i=t(r);e({color:"red",interactive:!1,pause:!1,ready:!1,step:0,graph:null,matrix:{},selectedNodes:[],extraDelay:1e3,endResult:null,edgesMap:{},nodesMap:{},dist_repr:[],input:"",parseInput(){let e=!0;try{JSON.parse(this.input)}catch(s){e=!1}if(!e)return;let t=JSON.parse(this.input,(function(e,t){return"inf"==t?1/0:t}));this.graph=t,this.init()},init(){o=function(e){let t=e.length,s=[],r=[...Array(t)].map((e=>Array(t))),o=[...Array(t)].map((e=>Array(t)));for(let i=0;i<t;i++)for(let s=0;s<t;s++)r[i][s]=e[i][s],e[i][s]>=1e7?o[i][s]=-1:o[i][s]=s;for(let i=0;i<t;i++)for(let e=0;e<t;e++)for(let l=0;l<t;l++){if(e===l||e===i||i===l)continue;r[e][l]>r[e][i]+r[i][l]&&(r[e][l]=r[e][i]+r[i][l],o[e][l]=o[e][i]);const t=r.map((e=>Object.assign({},e)));s.push({i:e,j:l,k:i,dist:t})}return{dist:r,next:o,steps:s}}(this.graph),this.endResult=o;let e=function(e){let t=e.length;const s=[],r=[];for(let o=0;o<t;o++)s.push({data:{id:"n"+o,name:o,active:!1}});for(let o=0;o<t;o++)for(let s=0;s<t;s++)e[o][s]<1e7&&0!==e[o][s]&&r.push({data:{id:"s"+o+"t"+s,source:"n"+o,target:"n"+s,weight:e[o][s]}});return{nodes:s,edges:r}}(this.graph);i.add(e.nodes),i.add(e.edges),i.layout({name:"concentric",concentric:function(e){return"j"===e.id()?200:0},levelWidth:function(e){return 100},minNodeSpacing:100}).run(),i.center(),this.ready=!0,this.pause=!0},handleClockTick(){this.ready&&(this.pause||this.nextStep()),this.togglecolor()},togglecolor(){this.color="red"===this.color?"blue":"red"},updateUI(){this.resetEdges(),this.resetNodes();let e=this.endResult.steps[this.step];this.matrix=e;let t=e.dist;for(let i=0;i<e.dist.length;i++)for(let s=0;s<e.dist.length;s++)t[i][s]=e.dist[i][s]===1/0?"âˆž":e.dist[i][s];this.dist_repr=t,console.table(e.dist);let s="s"+e.i+"t"+e.k,r="s"+e.i+"t"+e.j,o="s"+e.k+"t"+e.j;this.activateEdge(s,"#6EE7B7"),this.activateEdge(o,"#6EE7B7"),this.activateEdge(r,"#FDE68A"),this.activateNode("n"+e.i,"#FDE68A"),this.activateNode("n"+e.j,"#FDE68A"),this.activateNode("n"+e.k,"#6EE7B7")},nextStep(){if(this.step+1>=o.steps.length)return this.pause=!0,this.resetEdges(),this.resetNodes(),void(this.interactive=!0);this.step+=1,this.updateUI()},prevStep(){this.step-1<0?this.pause=!0:(this.step-=1,this.updateUI())},requestInterval:function(e,t,s){var r=window.requestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)},o=(new Date).getTime(),i={};return i.value=r((function l(){var n;i.value=r(l),(new Date).getTime()-o>=t+Number.parseInt(s.extraDelay)&&(null==(n=null==s?void 0:s[e])||n.call(s),o=(new Date).getTime())})),i},handleNodeSelection(e){if(this.interactive){if(this.selectedNodes.length<2){if(this.selectedNodes.push(e),2===this.selectedNodes.length){this.resetEdges();let e=this.endResult.next,t=function(e,t,s){if(-1==s[e][t])return null;let r=[];for(r.push(e);e!=t;)e=s[e][t],r.push(e);return r}(+this.selectedNodes[0].slice(1),+this.selectedNodes[1].slice(1),e);for(let s=1;s<t.length;s++){let e="s"+t[s-1]+"t"+t[s];this.activateEdge(e,"#10B981")}}}else 2===this.selectedNodes.length&&(this.selectedNodes.splice(0,3),this.resetEdges());for(let e=0;e<this.graph.length;e++)i.nodes(`[id = "${"n"+e}"]`).style("background-color","white");for(let e of this.selectedNodes)i.nodes(`[id = "${e}"]`).style("background-color","#6EE7B7")}},resetEdges(){for(let e of i.edges())e.style("line-color","#909090")},resetNodes(){for(let e of i.nodes())e.style("background-color","white")},activateEdge(e,t){i.edges(`[id = "${e}"]`).style("line-color",t)},activateNode(e,t){i.nodes(`[id = "${e}"]`).style("background-color",t)},userSelectAgain(){this.selectedNodes=[],this.resetEdges(),this.resetNodes()},afterMount(){console.log("mounted");let e={};for(let s of i.edges())e[s.id()]=s;let t={};for(let s of i.nodes())t[s.id()]=s;this.edgesMap=e,this.nodesMap=t,this.requestInterval("handleClockTick",100,this),i.on("select","node",(e=>{this.handleNodeSelection(e.target.id())}))}}).mount();
